{% extends 'dashboard/base_dashboard.html' %}
{% block title %}{{ 'Editar' if admission else 'Nueva' }} Admisión - Wawalu{% endblock %}
{% block content %}
<div class="max-w-4xl mx-auto">
  <!-- Header -->
  <div class="mb-8">
    <a href="{{ url_for('manage_admissions') }}" class="text-blue-600 hover:text-blue-700 flex items-center gap-2 mb-4">
      <span class="material-symbols-outlined">arrow_back</span>
      Volver a Admisiones
    </a>
    <h1 class="text-3xl font-bold text-gray-800">{{ 'Editar' if admission else 'Nueva' }} Admisión</h1>
  </div>

  <!-- Form -->
  <form action="{{ url_for('edit_admission_admin', admission_id=admission.id) if admission else url_for('add_admission_admin') }}" method="POST" class="bg-white rounded-xl shadow-sm border border-gray-100 p-8">
    
    <!-- Parent Information -->
    <div class="mb-8">
      <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
        <span class="material-symbols-outlined">person</span>
        Información del Padre/Tutor
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Nombre</label>
          <input type="text" name="parent_name" required value="{{ admission.parent_name if admission else '' }}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Apellido</label>
          <input type="text" name="parent_lastname" required value="{{ admission.parent_lastname if admission else '' }}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
          <input type="email" name="email" required value="{{ admission.email if admission else '' }}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Teléfono</label>
          <input type="tel" name="phone" required value="{{ admission.phone if admission else '' }}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Tipo de Documento</label>
          <select name="doc_type" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            <option value="DNI" {{ 'selected' if admission and admission.doc_type == 'DNI' else '' }}>DNI</option>
            <option value="CE" {{ 'selected' if admission and admission.doc_type == 'CE' else '' }}>Carnet de Extranjería</option>
            <option value="Pasaporte" {{ 'selected' if admission and admission.doc_type == 'Pasaporte' else '' }}>Pasaporte</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Número de Documento</label>
          <input type="text" name="doc_number" required value="{{ admission.doc_number if admission else '' }}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
      </div>
    </div>

    <!-- Child Information -->
    <div class="mb-8">
      <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
        <span class="material-symbols-outlined">child_care</span>
        Información del Niño/a
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Nombre</label>
          <input type="text" name="child_name" required value="{{ admission.child_name if admission else '' }}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Apellido</label>
          <input type="text" name="child_lastname" required value="{{ admission.child_lastname if admission else '' }}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Fecha de Nacimiento</label>
          <input type="date" name="child_dob" required value="{{ admission.child_dob.strftime('%Y-%m-%d') if admission and admission.child_dob else '' }}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Género</label>
          <select name="child_gender" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            <option value="M" {{ 'selected' if admission and admission.child_gender == 'M' else '' }}>Masculino</option>
            <option value="F" {{ 'selected' if admission and admission.child_gender == 'F' else '' }}>Femenino</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Academic Information -->
    <div class="mb-8">
      <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
        <span class="material-symbols-outlined">school</span>
        Información Académica
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Programa</label>
          <input type="text" name="program" required value="{{ admission.program if admission else '' }}" placeholder="Ej: Inicial 3 años" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Estado</label>
          <select name="status" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            <option value="pending" {{ 'selected' if admission and admission.status == 'pending' else '' }}>Pendiente</option>
            <option value="accepted" {{ 'selected' if admission and admission.status == 'accepted' else '' }}>Aceptado</option>
            <option value="rejected" {{ 'selected' if admission and admission.status == 'rejected' else '' }}>Rechazado</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Actions -->
    <div class="flex gap-4 pt-4">
      <a href="{{ url_for('manage_admissions') }}" class="flex-1 px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors text-center font-medium">
        Cancelar
      </a>
      <button type="submit" class="flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium">
        {{ 'Actualizar' if admission else 'Crear' }} Admisión
      </button>
    </div>
  </form>
</div>
{% endblock %}
