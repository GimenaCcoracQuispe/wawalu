{% extends 'dashboard/base_dashboard.html' %} {% block title %}{{ 'Editar' if
news else 'Nueva' }} Noticia - Wawalu{% endblock %} {% block content %}
<div class="max-w-4xl mx-auto">
  <!-- Header -->
  <div class="mb-8">
    <a
      href="{{ url_for('manage_news') }}"
      class="text-gray-500 hover:text-blue-600 mb-2 inline-flex items-center gap-1 transition-colors"
    >
      <span class="material-symbols-outlined text-sm">arrow_back</span>
      Volver a Noticias
    </a>
    <h1 class="text-3xl font-bold text-gray-800">
      {{ 'Editar' if news else 'Nueva' }} Noticia
    </h1>
  </div>

  <!-- Form Card -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 md:p-8">
    <form method="POST" enctype="multipart/form-data" class="space-y-6">
      <!-- Title -->
      <div>
        <label for="title" class="block text-sm font-medium text-gray-700 mb-1"
          >Título de la Noticia</label
        >
        <input
          type="text"
          name="title"
          id="title"
          required
          value="{{ news.title if news else '' }}"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"
          placeholder="Ej: Celebración del Día de la Madre"
        />
      </div>

      <!-- Content -->
      <div>
        <label
          for="content"
          class="block text-sm font-medium text-gray-700 mb-1"
          >Contenido</label
        >
        <textarea
          name="content"
          id="content"
          rows="6"
          required
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"
          placeholder="Escribe el contenido de la noticia aquí..."
        >
{{ news.content if news else '' }}</textarea
        >
      </div>

      <!-- Image -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1"
          >Imagen Destacada</label
        >

        {% if news and news.image_url %}
        <div class="mb-4">
          <p class="text-xs text-gray-500 mb-2">Imagen actual:</p>
          <img
            src="{{ url_for('serve_image', table='news', id=news.id) }}"
            alt="Current image"
            class="h-48 w-auto object-cover rounded-lg border border-gray-200"
          />
        </div>
        {% endif %}

        <div
          class="flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:bg-gray-50 transition-colors cursor-pointer"
          onclick="document.getElementById('image').click()"
        >
          <div class="space-y-1 text-center">
            <span class="material-symbols-outlined text-4xl text-gray-400"
              >image</span
            >
            <div class="flex text-sm text-gray-600 justify-center">
              <label
                for="image"
                class="relative cursor-pointer rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none"
              >
                <span>Subir un archivo</span>
                <input
                  id="image"
                  name="image"
                  type="file"
                  class="sr-only"
                  accept="image/*"
                />
              </label>
              <p class="pl-1">o arrastrar y soltar</p>
            </div>
            <p class="text-xs text-gray-500">PNG, JPG, GIF hasta 10MB</p>
          </div>
        </div>
      </div>

      <!-- Actions -->
      <div
        class="flex items-center justify-end gap-4 pt-4 border-t border-gray-100"
      >
        <a
          href="{{ url_for('manage_news') }}"
          class="px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors font-medium"
        >
          Cancelar
        </a>
        <button
          type="submit"
          class="bg-blue-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-500/30"
        >
          {{ 'Guardar Cambios' if news else 'Publicar Noticia' }}
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %} 

{% block scripts %}
<script src="{{ url_for('static', filename='js/news_form.js') }}"></script>
{% endblock %}
