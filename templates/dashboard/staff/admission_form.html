{% extends 'dashboard/base_dashboard.html' %} 
{% block title %}{{ 'Editar' if admission else 'Nueva' }} Admisión - Wawalu{% endblock %} 
{% block content %}
<div class="max-w-4xl mx-auto">
  <!-- Header -->
  <div class="mb-8">
    <a
      href="{{ url_for('manage_admissions') }}"
      class="text-gray-500 hover:text-blue-600 mb-2 inline-flex items-center gap-1 transition-colors"
    >
      <span class="material-symbols-outlined text-sm">arrow_back</span>
      Volver a Admisiones
    </a>
    <h1 class="text-3xl font-bold text-gray-800">
      {{ 'Editar' if admission else 'Nueva' }} Admisión
    </h1>
  </div>

  <!-- Form Card -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 md:p-8">
    <form method="POST" class="space-y-8">
      
      <!-- Parent Information -->
      <div>
        <h3 class="text-lg font-bold text-gray-800 mb-4 border-b pb-2">Información del Padre/Tutor</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Nombres</label>
            <input type="text" name="parent_name" value="{{ admission.parent_name if admission else '' }}" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Apellidos</label>
            <input type="text" name="parent_lastname" value="{{ admission.parent_lastname if admission else '' }}" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
            <input type="email" name="email" value="{{ admission.email if admission else '' }}" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Teléfono</label>
            <input type="tel" name="phone" value="{{ admission.phone if admission else '' }}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Tipo Documento</label>
            <select name="doc_type" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all">
              <option value="DNI" {% if admission and admission.doc_type == 'DNI' %}selected{% endif %}>DNI</option>
              <option value="CE" {% if admission and admission.doc_type == 'CE' %}selected{% endif %}>CE</option>
              <option value="Pasaporte" {% if admission and admission.doc_type == 'Pasaporte' %}selected{% endif %}>Pasaporte</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Número Documento</label>
            <input type="text" name="doc_number" value="{{ admission.doc_number if admission else '' }}" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all">
          </div>
        </div>
      </div>

      <!-- Child Information -->
      <div>
        <h3 class="text-lg font-bold text-gray-800 mb-4 border-b pb-2">Información del Estudiante</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Nombres</label>
            <input type="text" name="child_name" value="{{ admission.child_name if admission else '' }}" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Apellidos</label>
            <input type="text" name="child_lastname" value="{{ admission.child_lastname if admission else '' }}" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Fecha de Nacimiento</label>
            <input type="date" name="child_dob" value="{{ admission.child_dob if admission else '' }}" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Género</label>
            <select name="child_gender" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all">
              <option value="M" {% if admission and admission.child_gender == 'M' %}selected{% endif %}>Masculino</option>
              <option value="F" {% if admission and admission.child_gender == 'F' %}selected{% endif %}>Femenino</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Academic & Status -->
      <div>
        <h3 class="text-lg font-bold text-gray-800 mb-4 border-b pb-2">Información Académica</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Programa de Interés</label>
            <select name="program" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all">
              <option value="Nido" {% if admission and admission.program == 'Nido' %}selected{% endif %}>Nido (1-3 años)</option>
              <option value="Pre-Kinder" {% if admission and admission.program == 'Pre-Kinder' %}selected{% endif %}>Pre-Kinder (3-4 años)</option>
              <option value="Kinder" {% if admission and admission.program == 'Kinder' %}selected{% endif %}>Kinder (4-5 años)</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Estado</label>
            <select name="status" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all">
              <option value="pending" {% if admission and admission.status == 'pending' %}selected{% endif %}>Pendiente</option>
              <option value="accepted" {% if admission and admission.status == 'accepted' %}selected{% endif %}>Aceptada</option>
              <option value="rejected" {% if admission and admission.status == 'rejected' %}selected{% endif %}>Rechazada</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Actions -->
      <div class="flex items-center justify-end gap-4 pt-4 border-t border-gray-100">
        <a
          href="{{ url_for('manage_admissions') }}"
          class="px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors font-medium"
        >
          Cancelar
        </a>
        <button
          type="submit"
          class="bg-blue-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-500/30"
        >
          {{ 'Guardar Cambios' if admission else 'Crear Admisión' }}
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
